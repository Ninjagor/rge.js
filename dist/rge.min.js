var es=Object.defineProperty;var ie=(r,t)=>{for(var e in t)es(r,e,{get:t[e],enumerable:!0})};function Je(r){let t=this.keyStates,e=o=>{let a=o.key;!t[a]&&r[a]&&r[a].press&&(t[a]=!0,r[a].press())},s=o=>{let a=o.key;t[a]=!1,r[a]&&r[a].release&&r[a].release()};for(let o in r)document.addEventListener("keydown",e),document.addEventListener("keyup",s),setInterval(()=>ts(this,r,o),100)}function ts(r,t,e){r.keyStates[e]&&t[e]&&t[e].hold&&t[e].hold()}function Ke(r){this.mouseClickHandlers.push(r)}function qe(r){let t,e;if(this.renderingOrigin=="topleft")t=r.clientX-this.canvas.getBoundingClientRect().left+this.camx,e=r.clientY-this.canvas.getBoundingClientRect().top-this.camy;else{let s=this.canvas.parentElement.getBoundingClientRect();t=r.clientX-s.left-s.width/2+this.camx,e=r.clientY-s.top-s.height/2-this.camy}for(let s of this.entities)s.hitTest&&s.hitTest(t,e)&&s.onClickHandler()}function Ze(r){if(this.renderingOrigin=="topleft")this.mouseX=r.clientX-this.canvas.getBoundingClientRect().left+this.camx,this.mouseY=r.clientY-this.canvas.getBoundingClientRect().top-this.camy;else{let t=this.canvas.parentElement.getBoundingClientRect();this.mouseX=r.clientX-t.left-t.width/2+this.camx,this.mouseY=r.clientY-t.top-t.height/2-this.camy}}function Ue(r,t,e,s){let o=r-e,a=t-s;return Math.sqrt(o*o+a*a)}function je(r,t){let e=t.x,s=t.y,o=r.x,a=r.y,c=r.width,f=r.height,y=t.radius*2,g=e,x=s;return e<o?g=o:e>o+c&&(g=o+c),s<a?x=a:s>a+f&&(x=a+f),this.findDistance(e,s,g,x)<=y/2}function Ne(r,t){if(r.isDestroyed||t.isDestroyed)return!1;let e=Math.max(0,Math.min(r.x+r.width,t.x+t.width)-Math.max(r.x,t.x)),s=Math.max(0,Math.min(r.y+r.height,t.y+t.height)-Math.max(r.y,t.y));return e>0&&s>0}function Qe(r,t,e){let s=e.vertices,o=!1,a=0;for(let c=0;c<s.length;c++){a=c+1,a===s.length&&(a=0);let f=s[c],y=s[a];(f.y+e.y>=t&&y.y+e.y<t||f.y+e.y<t&&y.y+e.y>=t)&&r<(y.x+e.x-(f.x+e.x))*(t-(f.y+e.y))/(y.y+e.y-(f.y+e.y))+(f.x+ +e.x)&&(o=!o)}return o}function et(r,t,e,s,o,a,c){let f=this.collidePointEllipse(r,t,o,a,c),y=this.collidePointEllipse(e,s,o,a,c);if(f||y)return!0;let g=r-e,x=t-s,$=Math.sqrt(g*g+x*x),R=((o-r)*(e-r)+(a-t)*(s-t))/Math.pow($,2),S=r+R*(e-r),F=t+R*(s-t);return this.collidePointLine(S,F,r,t,e,s)?(g=S-o,x=F-a,Math.sqrt(g*g+x*x)<=c/2):!1}function tt(r,t,e,s,o){return this.findDistance(r,t,e,s)<=o/2}function it(r,t,e,s,o,a,c){let f=this.findDistance(r,t,e,s),y=this.findDistance(r,t,o,a),g=this.findDistance(e,s,o,a);return c===void 0&&(c=.1),f+y>=g-c&&f+y<=g+c}function st(r,t,e){let s=r.x,o=r.y,a=r.radius*2,c=t.vertices;e===void 0&&(e=!0);let f=0;for(let y=0;y<c.length;y++){f=y+1,f===c.length&&(f=0);let g=c[y],x=c[f];if(this.collideLineEllipse(g.x+t.x,g.y+t.y,x.x+t.x,x.y+t.y,s,o,a))return!0}return!!(e===!0&&this.collidePointPoly(s,o,t))}function rt(r,t,e,s,o,a,c,f,y){let g,x=((c-o)*(t-a)-(f-a)*(r-o))/((f-a)*(e-r)-(c-o)*(s-t)),$=((e-r)*(t-a)-(s-t)*(r-o))/((f-a)*(e-r)-(c-o)*(s-t));var R,S;return x>=0&&x<=1&&$>=0&&$<=1?(y&&(R=r+x*(e-r),S=t+x*(s-t)),y?(g={x:R,y:S},g):!0):y?(g={x:!1,y:!1},g):!1}function nt(r,t,e,s,o,a,c,f,y){let g,x,$,R,S;return y?(g=this.collideLineLine(r,t,e,s,o,a,o,a+f,!0),x=this.collideLineLine(r,t,e,s,o+c,a,o+c,a+f,!0),$=this.collideLineLine(r,t,e,s,o,a,o+c,a,!0),R=this.collideLineLine(r,t,e,s,o,a+f,o+c,a+f,!0),S={left:g,right:x,top:$,bottom:R}):(g=this.collideLineLine(r,t,e,s,o,a,o,a+f),x=this.collideLineLine(r,t,e,s,o+c,a,o+c,a+f),$=this.collideLineLine(r,t,e,s,o,a,o+c,a),R=this.collideLineLine(r,t,e,s,o,a+f,o+c,a+f)),g||x||$||R?y?S:!0:!1}function ot(r,t,e){let s=t.vertices,o=r.x,a=r.y,c=r.width,f=r.height;e==null&&(e=!0);for(var y=0,g=0;g<s.length;g++){y=g+1,y===s.length&&(y=0);var x=s[g],$=s[y],R=this.collideLineRect(x.x+t.x,x.y+t.y,$.x+t.x,$.y+t.y,o,a,c,f);if(R)return!0;if(e===!0){var S=this.collidePointPoly(o,a,t);if(S)return!0}}return!1}function at(r,t){return Math.sqrt((r.x-t.x)**2+(r.y-t.y)**2)<=r.radius+t.radius}function lt(r,t,e,s,o){for(let a=0;a<o.length;a++){let c=o[a].x,f=o[a].y,y=o[(a+1)%o.length].x,g=o[(a+1)%o.length].y;if(is(r,t,e,s,c,f,y,g))return!0}return!1}function is(r,t,e,s,o,a,c,f){let y=ue(r,t,e,s,o,a),g=ue(r,t,e,s,c,f),x=ue(o,a,c,f,r,t),$=ue(o,a,c,f,e,s);return(y>0&&g<0||y<0&&g>0)&&(x>0&&$<0||x<0&&$>0)}function ue(r,t,e,s,o,a){return(e-r)*(a-t)-(s-t)*(o-r)}function ht(r,t){let e=r.vertices,s=t.vertices,o=!1;for(let a=0;a<e.length;a++)if(console.log("testing collision: ",e[a].x,e[a].y,t),this.collidePointPoly(e[a].x+r.x,e[a].y+r.y,t)){o=!0;break}for(let a=0;a<s.length;a++)if(this.collidePointPoly(s[a].x+t.x,s[a].y+t.y,r)){o=!0;break}return o}var P=class{constructor(t,e,s=0){this.x=t,this.y=e,this.zIndex=s,this.isDestroyed=!1,this.onClick=null,this.class=[],this.isCurrentlyBeingDebugged=!1,this.id=void 0}update(){throw new Error('Method "update" must be implemented by subclasses')}addClass(t){this.class.push(t)}removeClass(t){this.class.pop(t)}addId(t){this.id=t}removeId(t){this.id=null}modifyId(t){this.id=t}render(t){throw new Error('Method "render" must be implemented by subclasses')}collisionLogic(t){throw new Error("Method 'collisionLogic' must be implemented by subclasses.")}destroy(){this.isDestroyed=!0}onClickHandler(){this.onClick&&this.onClick()}};var J=class extends P{constructor(t,e,s,o="red"){super(t,e),this.radius=s,this.fillColor=o,this.debug=!1}renderDebugBorder(t){let e="lime";t.strokeStyle=e,t.lineWidth=2,t.beginPath(),t.ellipse(this.x,this.y,this.radius,this.radius,0,0,2*Math.PI),t.stroke()}update(t,e,s=this.radius,o=this.fillColor){this.x=t,this.y=e,this.radius=s,this.fillColor=o}setTexture(t,e="stretched"){this.texture=t,this.fillMode=e,this.renderTexture=!0}debugMode(){this.debug=!0}render(t){this.texture?this.texture.complete?this.fillMode==="cover"?this.renderCover(t):this.renderStretched(t):this.renderLoadingBackground(t):(t.fillStyle=this.fillColor,t.beginPath(),t.ellipse(this.x,this.y,this.radius,this.radius,0,0,2*Math.PI),t.fill()),this.debug&&this.renderDebugBorder(t)}renderLoadingBackground(t){let e="gray";t.fillStyle=e,t.beginPath(),t.ellipse(this.x,this.y,this.radius,this.radius,0,0,2*Math.PI),t.fill()}renderStretched(t){t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.clip(),t.drawImage(this.texture,this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius),t.restore()}renderCover(t){let e=this.texture.width/this.texture.height,s=this.radius,o=this.x-s,a=this.y-s;t.save(),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.clip(),t.drawImage(this.texture,o,a,2*s*e,2*s),t.restore()}hitTest(t,e){return Math.sqrt((t-this.x)**2+(e-this.y)**2)<=this.radius}};var K=class extends P{constructor(t,e,s,o,a="blue",c={},f=!0){super(t,e),this.width=s;let{borderWidth:y=0,borderColor:g}=c;this.borderColor=g,this.borderWidth=y,this.height=o,this.fillColor=a,f?this.enableCentered():this.disableCentered(),this.debug=!1}debugMode(){this.debug=!0}renderDebugBorder(t){let e="#19bf19";t.strokeStyle=e,t.lineWidth=2,t.strokeRect(this.x,this.y,this.width,this.height)}renderBorder(t,e,s){if(this.borderWidth<1)return;let o=s;t.strokeStyle=o,t.lineWidth=e,t.strokeRect(this.x,this.y,this.width,this.height)}enableCentered(){this.centered=!0,this.x=this.x-this.width/2,this.y=this.y-this.height/2}disableCentered(){this.centered=!1,this.x=this.x,this.y=this.y}update(t,e,s=this.fillColor){this.centered?(this.x=t-this.width/2,this.y=e-this.height/2):(this.x=t,this.y=e),this.fillColor=s}setTexture(t,e="stretched"){this.texture=t,this.fillMode=e,this.renderTexture=!0}render(t){this.texture?this.texture.complete?this.fillMode==="cover"?this.renderCover(t):this.renderStretched(t):this.renderLoadingBackground(t):(t.fillStyle=this.fillColor,t.fillRect(this.x,this.y,this.width,this.height),this.renderBorder(t,this.borderWidth,this.borderColor)),this.debug&&this.renderDebugBorder(t)}renderLoadingBackground(t){let e="gray";t.fillStyle=e,t.fillRect(this.x,this.y,this.width,this.height)}renderStretched(t){t.drawImage(this.texture,this.x,this.y,this.width,this.height)}renderCover(t){let e=this.texture.width/this.texture.height,s=this.width,o=this.width/e,a=this.x,c=this.y+(this.height-o)/2;t.drawImage(this.texture,a,c,s,o)}hitTest(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}};var D=class extends P{constructor(t,e,s,o=16,a="black",c="Arial"){super(t,e),this.text=s,this.fontSize=o,this.font=c,this.fillStyle=a}update(t,e,s=this.text,o=this.fontSize,a=this.font){this.x=t,this.y=e,this.text=s,this.fontSize=o,this.font=a}getWidth(t){return t.font=`${this.fontSize}px ${this.font}`,t.measureText(this.text).width}getHeight(t){t.font=`${this.fontSize}px ${this.font}`;let e=t.measureText(this.text);return e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}render(t){t.font=`${this.fontSize}px ${this.font}`,t.fillStyle=this.fillStyle,t.fillText(this.text,this.x,this.y)}collisionLogic(t){return!1}};var q=class extends P{constructor(t,e,s,o="green",a={}){super(t,e);let{borderWidth:c=0,borderColor:f="black"}=a;this.vertices=s,this.fillColor=o,this.borderWidth=c,this.borderColor=f,this.debug=!1,this.imageRotation=0}debugMode(){this.debug=!0}update(t,e,s=this.vertices,o=this.fillColor){this.x=t,this.y=e,this.vertices=s,this.fillColor=o}getBoundingBox(){let t=this.vertices[0].x+this.x,e=this.vertices[0].x+this.x,s=this.vertices[0].y+this.y,o=this.vertices[0].y+this.y;for(let a=1;a<this.vertices.length;a++){let c=this.vertices[a].x+this.x,f=this.vertices[a].y+this.y;t=Math.min(t,c),e=Math.max(e,c),s=Math.min(s,f),o=Math.max(o,f)}return{x:t,y:s,width:e-t,height:o-s}}setTexture(t,e=0,s="stretched"){this.texture=t,this.fillMode=s,this.renderTexture=!0,this.imageRotation=e}render(t){if(this.renderTexture&&this.texture)this.fillMode==="cover"?this.renderCover(t):this.renderStretched(t);else{t.fillStyle=this.fillColor,t.beginPath(),t.moveTo(this.vertices[0].x+this.x,this.vertices[0].y+this.y);for(let e=1;e<this.vertices.length;e++)t.lineTo(this.vertices[e].x+this.x,this.vertices[e].y+this.y);this.renderBorder(t),t.closePath(),t.fill()}this.debug&&this.renderDebugBorder(t)}renderDebugBorder(t){let e="lime";t.strokeStyle=e,t.lineWidth=2,t.beginPath(),t.moveTo(this.vertices[0].x+this.x,this.vertices[0].y+this.y);for(let s=1;s<this.vertices.length;s++)t.lineTo(this.vertices[s].x+this.x,this.vertices[s].y+this.y);t.closePath(),t.stroke()}renderBorder(t){let e=this.borderColor;t.strokeStyle=e,t.lineWidth=this.borderWidth,t.beginPath(),t.moveTo(this.vertices[0].x+this.x,this.vertices[0].y+this.y);for(let s=1;s<this.vertices.length;s++)t.lineTo(this.vertices[s].x+this.x,this.vertices[s].y+this.y);t.closePath(),t.stroke()}renderStretched(t){this.renderCover(t)}renderCover(t){let e=this.getBoundingBox(),s=e.width,o=e.height;t.save(),t.translate(this.x,this.y),t.rotate(this.imageRotation*Math.PI/180),t.translate(-this.x,-this.y),t.beginPath(),t.moveTo(this.vertices[0].x+this.x,this.vertices[0].y+this.y);for(let a=1;a<this.vertices.length;a++)t.lineTo(this.vertices[a].x+this.x,this.vertices[a].y+this.y);t.closePath(),t.clip(),t.drawImage(this.texture,e.x,e.y,s,o),t.restore(),t.restore()}hitTest(t,e){let s=!1;for(let o=0,a=this.vertices.length-1;o<this.vertices.length;a=o++){let c=this.vertices[o].x+this.x,f=this.vertices[o].y+this.y,y=this.vertices[a].x+this.x,g=this.vertices[a].y+this.y;f>e!=g>e&&t<(y-c)*(e-f)/(g-f)+c&&(s=!s)}return s}collisionLogic(t){return!1}};var pe=class{constructor(t,e=!1){this.audio=new Audio(t),this.loop=e,this.volume=1,this.audio.volume=this.volume,e?(this.audio.loop=!0,this.audio.play()):this.audio.addEventListener("ended",()=>{this.stopSound()})}playSound(){this.loop||(this.stopSound(),this.audio.play())}stopSound(){this.audio.pause(),this.audio.currentTime=0}pauseSound(){this.audio.pause()}beginLoop(){try{this.audio.loop=!0,this.audio.play()}catch(t){console.log("error",t)}}setVolume(t){this.volume=Math.max(0,Math.min(1,t)),this.audio.volume=this.volume}};var Y=class extends P{constructor(t,e,s=[],o){super(t,e),this.entities=s,this.offsets=[],o&&o instanceof L&&o.watch(()=>{this.entities.forEach((a,c)=>{let f=this.offsets[c].x,y=this.offsets[c].y;a.update(t+f,e+y)})},[()=>this.x,()=>this.y])}addEntity(t,e=0,s=0){this.entities.push(t),this.offsets.push({x:e,y:s}),this.update(this.x,this.y)}removeEntity(t){let e=this.entities.indexOf(t);e!==-1&&(this.entities.splice(e,1),this.offsets.splice(e,1))}update(t,e){this.x=t,this.y=e,this.entities.forEach((s,o)=>{let a=this.offsets[o].x,c=this.offsets[o].y;s.update(t+a,e+c)})}render(t){this.entities.forEach(e=>{e.render(t)})}};var ct={};ie(ct,{Button:()=>ge,Error:()=>I,HTMLBasedPopup:()=>me,HTMLButton:()=>ye,HTMLDiv:()=>ve,HTMLInput:()=>xe,UIRect:()=>Z});var Z=class extends K{constructor(t,e,s,o,a="blue",c=!0,f=0,y=0,g="blue"){super(t,e,s,o,a,c),this.borderRadius=f,this.borderColor=g,this.borderWidth=y}update(t,e,s=this.fillColor){this.centered?(this.x=t-this.width/2,this.y=e-this.height/2):(this.x=t,this.y=e),this.fillColor=s}render(t){this.texture?this.texture.complete?this.fillMode==="cover"?this.renderCover(t):this.renderStretched(t):this.renderLoadingBackground(t):this.borderRadius>0?this.renderRoundedRect(t,this.x,this.y,this.width,this.height,this.borderRadius,this.fillColor):(t.fillStyle=this.fillColor,t.fillRect(this.x,this.y,this.width,this.height)),this.borderWidth>=1&&this.renderBorder(t,this.borderRadius)}renderRoundedRect(t,e,s,o,a,c,f){t.save(),t.beginPath(),t.moveTo(e+c,s),t.arcTo(e+o,s,e+o,s+a,c),t.arcTo(e+o,s+a,e,s+a,c),t.arcTo(e,s+a,e,s,c),t.arcTo(e,s,e+o,s,c),t.closePath(),t.fillStyle=f,t.fill(),t.restore()}renderBorder(t,e=0){let s=this.borderColor;t.strokeStyle=s,t.lineWidth=this.borderWidth,e>0?(t.save(),t.beginPath(),t.moveTo(this.x+e,this.y),t.arcTo(this.x+this.width,this.y,this.x+this.width,this.y+this.height,e),t.arcTo(this.x+this.width,this.y+this.height,this.x,this.y+this.height,e),t.arcTo(this.x,this.y+this.height,this.x,this.y,e),t.arcTo(this.x,this.y,this.x+this.width,this.y,e),t.closePath(),t.stroke(),t.restore()):t.strokeRect(this.x,this.y,this.width,this.height)}};var ge=class extends P{constructor(t,e,s){super(t,e);let{EngineRef:o,buttonColor:a="red",borderRadius:c=0,borderWidth:f=0,borderColor:y="black",text:g,textSize:x=16,textColor:$="black",font:R="Arial",onClick:S}=s;this.EngineRef=o,this.checkWrongTypeError(),this.text=g,this.textSize=x,this.textColor=$,this.font=R,this.fillColor=a,this.br=c,this.bw=f,this.bc=y,this.onClick=S,this.groupWrapper=null,this.textRef=null,this.createEntities()}checkWrongTypeError(t=null){if(!(this.EngineRef instanceof L))this.alertWrongTypeError();else if(t!=null||t!=null)throw new Error(t)}alertWrongTypeError(){throw new Error(`EngineRef is not of type \`Engine\`. Expected type \`Engine\`. Recieved type \`${typeof this.EngineRef}\``)}createEntities(){try{let t=new Y(this.x,this.y);this.EngineRef.entities.push(t);let e=new D(this.x,this.y,this.text,this.textSize,this.textColor,this.font);this.EngineRef.entities.push(e),e.zIndex=10;let s=e.getWidth(this.EngineRef.context),o=e.getHeight(this.EngineRef.context),a=new Z(this.x,this.y,s+s*.5,o+o*2,this.fillColor,!0,this.br,this.bw,this.bc);a.zIndex=0,this.EngineRef.entities.push(a),a.onClick=this.onClick,this.EngineRef.addMouseClickHandler(a),t.addEntity(e),t.addEntity(a),e.x=e.x-s/2,e.y=e.y+o/3+o/10,this.groupWrapper=t,this.textRef=e}catch(t){this.checkWrongTypeError(t)}}update(t,e){if(this.x=t,this.y=e,this.groupWrapper&&(this.groupWrapper.update(t,e),this.textRef)){let s=this.textRef.getWidth(this.EngineRef.context),o=this.textRef.getHeight(this.EngineRef.context);this.textRef.update(t-s/2,e+o/3+o/10)}}render(t){}};var me=class{constructor(t,e,s){this.contents=e,this.containerId=t;let{width:o="500px",height:a="300px",title:c="",startXOffset:f=0,startYOffset:y=0,customDestructor:g=()=>{}}=s||{};this.width=o,this.height=a,this.title=c,this.startXOffset=f,this.startYOffset=y,this.customDestructor=g,this.createPopup(),this.addDraggableZone(),this.popup.appendChild(this.contents)}createPopup(){this.popup=document.createElement("div"),this.popup.classList.add("popup"),document.getElementById(this.containerId).appendChild(this.popup),this.popup.style.border="1px solid #ccc",this.popup.style.backgroundColor="#fff",this.popup.style.position="absolute",this.popup.style.padding="10px",this.popup.style.top="50%",this.popup.style.left="50%",this.popup.style.fontFamily="sans-serif",this.popup.style.borderTopLeftRadius="10px",this.popup.style.borderTopRightRadius="10px",this.popup.style.borderBottomLeftRadius="10px",this.popup.style.borderBottomRightRadius="10px";let t=-50+this.startXOffset,e=-50+this.startYOffset;this.popup.style.transform=`translate(${t}%, ${e}%)`,this.popup.style.height=this.height,this.popup.style.width=this.width,this.popup.style.paddingTop="35px",this.popup.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"}addDraggableZone(){let t=document.createElement("div");t.classList.add("draggable-zone"),t.style.height="25px",t.style.background="white",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.background="rgba(0, 0, 0, 0.01)",t.style.width="100%",t.style.borderTopLeftRadius="10px",t.style.borderTopRightRadius="10px",t.style.borderBottom="1px solid rgba(0, 0, 0, 0.1)";let e=document.createElement("p");e.textContent=this.title,e.style.position="absolute",e.style.left="10px",e.style.top="50%",e.style.fontSize="12px",e.style.marginTop="3px",e.style.opacity="40%",e.style.fontFamily="sans-serif",e.style.height="20px",e.style.borderRadius="1000px",e.style.transform="translateY(-50%)",t.appendChild(e);let s=document.createElement("button");s.style.position="absolute",s.style.right="5px",s.style.top="50%",s.style.width="20px",s.style.height="20px",s.style.borderRadius="1000px",s.style.transform="translateY(-50%)",s.style.border="none",s.style.display="flex",s.style.alignItems="center",s.style.background="rgba(0, 0, 0, 0.03)",s.style.justifyContent="center",s.innerHTML='<p style="font-size: 13px; display: flex; align-items: center; justify-content: center; opacity: 0.6; font-family: monospace;">x</p>',s.style.cursor="pointer",s.addEventListener("mouseenter",()=>{s.style.background="rgba(0, 0, 0, 0.1)"}),s.addEventListener("mouseleave",()=>{s.style.background="rgba(0, 0, 0, 0.03)"}),s.addEventListener("mousedown",()=>{s.style.background="rgba(0, 0, 0, 0.2)"}),s.addEventListener("mouseup",()=>{s.style.background="rgba(0, 0, 0, 0.1)"}),s.addEventListener("click",()=>{this.removePopup()}),t.appendChild(s),this.popup.appendChild(t);let o=!1,a,c;t.addEventListener("mousedown",f=>{o=!0,a=f.clientX-this.popup.offsetLeft,c=f.clientY-this.popup.offsetTop}),document.addEventListener("mousemove",f=>{o&&(this.popup.style.left=f.clientX-a+"px",this.popup.style.top=f.clientY-c+"px")}),document.addEventListener("mouseup",()=>{o=!1})}removePopup(){this.customDestructor(),this.popup.parentNode.removeChild(this.popup),this.popup=null}};var I=class{constructor(t="",e="",s="",o=""){this.errorHeader=t,this.errorDetails=e,this.affectedFunction=o,this.canvasId=s,this.renderError()}renderError(){let t=document.getElementById(this.canvasId).parentElement,e=document.createElement("div");e.style.width="`100%",e.style.zIndex="`100",e.style.backgroundColor="rgba(143, 4, 4, 0.9)",e.style.padding="20px 10px",e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.display="flex-col",e.style.overflowY="auto",e.innerHTML=`
            <p style="font-family: sans-serif; margin: 20px 100px; color: #edb7b7; font-weight: 200; font-size: 22px;">Error</p>
            <h1 style="font-family: sans-serif; margin: 20px 100px; color: #edb7b7; font-weight: 500;">${this.errorHeader}</h1>
            <p style="font-family: monospace; margin: 20px 100px; color: #edb7b7; font-weight: 500; font-size: 20px; opacity: 60%;">${this.errorDetails}</p>
            <p style="font-family: monospace; margin: 20px 100px; color: #edb7b7; font-weight: 500; font-size: 20px; opacity: 90%;">Instigating Function: ${this.affectedFunction}</p>
        `,t.innerHTML="",t.appendChild(e)}};var ye=class{constructor(t,e,s={}){let{canvasId:o="",text:a="",onClick:c=()=>{},style:f="",id:y=`btn-${JSON.stringify(Math.random()*100)}`}=s;this.x=t,this.y=e,this.canvasId=o,this.text=a,this.onClick=c,this.style=f,this.id=y,this.ref=null,this.render()}render(){let t=`<button onclick="${this.onClick}" style="position: absolute; left: ${this.x}px; top: ${this.y}px;" id="${this.id}">Hello</button>`,e=document.getElementById(this.canvasId).parentElement,s=document.createElement("button");s.textContent=this.text,s.onclick=this.onClick,s.style.left=`${this.x}px`,s.style.position="absolute",s.style.top=`${this.y}px`,s.id=this.id,this.style.split(";").filter(a=>a.trim()!=="").forEach(a=>{let[c,f]=a.split(":").map(y=>y.trim());c&&f&&(s.style[c]=f)}),this.ref=s,e.appendChild(s)}destroy(){this.ref&&(document.getElementById(this.canvasId).parentElement.removeChild(this.ref),this.ref=null)}};var xe=class{constructor(t,e,s={}){let{canvasId:o="",placeholder:a="",style:c="",id:f=`input-${JSON.stringify(Math.random()*1e4)}`}=s;this.x=t,this.y=e,this.canvasId=o,this.placeholder=a,this.style=c,this.id=f,this.ref=null,this.render()}render(){let t=document.getElementById(this.canvasId).parentElement,e=document.createElement("input");e.placeholder=this.placeholder,e.style.left=`${this.x}px`,e.style.position="absolute",e.style.top=`${this.y}px`,e.id=this.id,this.style.split(";").filter(o=>o.trim()!=="").forEach(o=>{let[a,c]=o.split(":").map(f=>f.trim());a&&c&&(e.style[a]=c)}),this.ref=e,t.appendChild(e)}destroy(){this.ref&&(document.getElementById(this.canvasId).parentElement.removeChild(this.ref),this.ref=null)}};var ve=class{constructor(t,e,s={}){let{canvasId:o="",style:a="",id:c=`div-${JSON.stringify(Math.random()*1e4)}`}=s;this.x=t,this.y=e,this.canvasId=o,this.style=a,this.id=c,this.ref=null,this.render()}render(){let t=document.getElementById(this.canvasId).parentElement,e=document.createElement("div");e.style.left=`${this.x}px`,e.style.position="absolute",e.style.top=`${this.y}px`,e.id=this.id,this.style.split(";").filter(o=>o.trim()!=="").forEach(o=>{let[a,c]=o.split(":").map(f=>f.trim());a&&c&&(e.style[a]=c)}),this.ref=e,t.appendChild(e)}destroy(){this.ref&&(document.getElementById(this.canvasId).parentElement.removeChild(this.ref),this.ref=null)}};var dt={};ie(dt,{PBRect:()=>be});var be=class extends P{constructor(t,e,s){super(t,e);let{EngineRef:o,width:a,height:c,rotation:f=0,fillColor:y="red",borderWidth:g=0,borderColor:x="black"}=s;if(!o||!(o instanceof L))throw new Error("EngineRef is required as instance of Engine.");if(!a||!c)throw new Error("`width` and `height` are mandatory fields.");this.width=a,this.height=c,this.rotation=f,this.fillColor=y,this.EngineRef=o,this.borderWidth=g,this.borderColor=x,this.polyrectRef=null,this.generatePoly()}generatePoly(){let t=this.calculateRotatedRectVertices(this.x,this.y,this.width,this.height,this.rotation),e=new q(this.x,this.y,t,this.fillColor,{borderWidth:this.borderWidth,borderColor:this.borderColor});this.polyrectRef=e,this.EngineRef.entities.push(e)}calculateRotatedRectVertices(t,e,s,o,a){t=1,e=1;let c=a*Math.PI/180,f=Math.cos(c),y=Math.sin(c),g=t-s/2,x=e-o/2,$=t+s/2,R=e-o/2,S=t+s/2,F=e+o/2,O=t-s/2,V=e+o/2,_=t+(g-t)*f-(x-e)*y,se=e+(g-t)*y+(x-e)*f,re=t+($-t)*f-(R-e)*y,ne=e+($-t)*y+(R-e)*f,oe=t+(S-t)*f-(F-e)*y,H=e+(S-t)*y+(F-e)*f,Pe=t+(O-t)*f-(V-e)*y,ae=e+(O-t)*y+(V-e)*f;return[{x:_,y:se},{x:re,y:ne},{x:oe,y:H},{x:Pe,y:ae}]}update(t,e,s){let{width:o=this.width,height:a=this.height,rotation:c=this.rotation,fillColor:f=this.fillColor}=s||{};if(this.polyrectRef){this.polyrectRef.update(t,e);let y=this.calculateRotatedRectVertices(this.polyrectRef.x,this.polyrectRef.y,o,a,c);this.polyrectRef.vertices=y,this.polyrectRef.fillColor=f}}};function ft(){if(this.entities.sort((r,t)=>r.zIndex-t.zIndex),this.customZSort(),this.renderingOrigin=="topleft")for(let r of this.entities)this.context.save(),this.context.translate(-this.camx,this.camy),r.render(this.context),this.context.restore();else for(let r of this.entities)this.context.save(),this.context.translate(this.canvas.width/2-this.camx,this.canvas.height/2+this.camy),r.render(this.context),this.context.restore()}async function ut(){this.isStopped=!1,this.canvasLoadingView(),this.preloadExecuted||await this.preload(),this.setupExecuted||this.setup(),this.updateAssetLoadingCount(),setTimeout(()=>{this.animationFrameId=requestAnimationFrame(r=>this.gameLoop(r))},Object.keys(this.preloadedImages).length*(this.textureLoadingTime/Object.keys(this.preloadedImages).length))}function pt(r={}){let{preload:t,setup:e,tick:s,centeredOrigin:o}=r;t&&this.setPreload(t),e&&this.setupFunction(e),s&&this.setTickFunction(s),o===!0&&this.setCenterOrigin()}async function gt(r){if(this.preloadExecuted)throw new Error("loadImage can only be used in preload()");try{let e=await(await fetch(r)).blob(),s=new Image;s.src=URL.createObjectURL(e);let o=r.substring(r.lastIndexOf("/")+1);return this.preloadedImages[o]=s,s}catch(t){return console.error("Error loading image:",t),null}}function mt(){this.clearCanvas();let r=new D(0,0,"Loading assets...",30,"black");r.update(0-r.getWidth(this.context)/2,0),this.context.save(),this.context.translate(this.canvas.width/2,this.canvas.height/2),r.render(this.context),this.context.restore()}function yt(){let r=0,t=setInterval(()=>{this.canvasLoadingView(),this.loadedAssetsCount+=1,r<Object.keys(this.preloadedImages).length||clearInterval(t),r++},this.textureLoadingTime/Object.keys(this.preloadedImages).length)}async function xt(r,t){if(this.preloadExecuted)throw new Error("loadFont can only be used in preload()");try{let e=await fetch(r);console.log(e);let s=await e.blob();console.log(s);let o=new FontFace(t,s);return await o.load(),document.fonts.add(o),this.preloadedFonts[t]=o,o}catch(e){return console.error("Error loading font:",e),null}}async function vt(r,t){if(this.preloadExecuted)throw new Error("loadFont can only be used in preload()");try{let o=(await(await fetch(r)).text()).match(/url\(([^)]+)\)/);if(!o||o.length<2)throw new Error("Font URL not found in CSS");let a=o[1].replace(/['"]/g,""),c=new FontFace(t,`url(${a})`);return await c.load(),document.fonts.add(c),this.preloadedFonts[t]=c,c}catch(e){return console.error("Error loading font:",e),null}}var bt={};ie(bt,{get:()=>ei,push:()=>ii,remove:()=>ti,update:()=>si});function ei(r){try{let t=localStorage.getItem(r);return JSON.parse(t)}catch(t){throw console.error(t),new Error(t)}}function ti(r){try{let t=localStorage.removeItem(r)}catch(t){throw console.error(t),new Error(t)}}function ii(r,t){try{return localStorage.setItem(r,JSON.stringify(t))}catch(e){throw console.error(e),new Error(e)}}function si(r,t){try{let e=localStorage.removeItem(r);return localStorage.setItem(r,JSON.stringify(t))}catch(e){throw console.error(e),new Error(e)}}var Ee=class{constructor(t){this.events=[],this.callbackRegistry=[],this.canvasId=t.canvasId}emit(t){this.events.push(t)}subscribe(t,e,s){if(!t||!e||!s)throw new I("invalid subcription to EventBus");try{this.callbackRegistry.push({subName:t,subEvent:e,callback:s}),console.log(this.callbackRegistry)}catch(o){throw console.error(o),new I("invalid subcription to EventBus")}}unsubscribe(t){let e=[];for(let s of this.callbackRegistry)s.subName!=t&&e.push(s);this.callbackRegistry=e}process(){for(let t of this.events)for(let e of this.callbackRegistry)if(e.subEvent==t)try{e.callback()}catch(s){new I("EventBus Callback Error",`The callback provided for subscribed event "${t}" has failed. <br><br> <br> Instigating Callback: <br><br> ${e.callback}. <br><br> ${s} <br><br><br> Fix this error or remove the instigating callback to remove this message. <br><br>`,this.canvasId,"subscribe()");let o=new I("Error: Callback for event in EventBus failed.");throw o.name="",o}this.events=[]}};var L=class{constructor(t,e=60,s={}){let{isEmbedded:o=!1,__fcm__:a=!1,maxEntities:c=500,webGLMode:f=!1}=s;this.isEmbedded=o,this.canvas=document.getElementById(t),this.isEmbedded&&this.canvas.setAttribute("data-entities",JSON.stringify([])),a||console.warn("Your code contains a raw Engine instantiation, which is not recommended for larger scale projects. Use SceneManager instead. To ignore, set __fcm__ to true in your Engine instantiation."),this.maxEntities=c,this.canvasId=t,f?this.context=this.canvas.getContext("webgl"):this.context=this.canvas.getContext("2d"),this.webGLMode=f,this.entities=[],this.tickFunction=()=>{},this.targetFps=e,this.targetFrameTime=1e3/e,this.lastTimestamp=0,this.deltaAccumulator=0,this.mouseX=0,this.mouseY=0,this.addKeyPressAction=Je.bind(this),this.addMouseClickHandler=Ke.bind(this),this.handleMouseClick=qe.bind(this),this.keyStates={},this.mouseClickHandlers=[],this.canvas.addEventListener("mousedown",this.handleMouseClick.bind(this)),this.collideRectRect=Ne.bind(this),this.collideRectEllipse=je.bind(this),this.collidePointPoly=Qe.bind(this),this.findDistance=Ue.bind(this),this.initMouseTracking=Ze.bind(this),this.canvas.addEventListener("mousemove",this.initMouseTracking.bind(this)),this.collideLineEllipse=et.bind(this),this.collidePointEllipse=tt.bind(this),this.collidePointLine=it.bind(this),this.collideEllipsePoly=st.bind(this),this.collideLineLine=rt.bind(this),this.collideLineRect=nt.bind(this),this.collideRectPoly=ot.bind(this),this.collideEllipseEllipse=at.bind(this),this.collideLinePoly=lt.bind(this),this.collidePolyPoly=ht.bind(this),this.animationFrameId=null,window.addEventListener("resize",this.handleResize),this.resizeCanvas(),this.renderingOrigin="topleft",this.customZSort=()=>{},this.canvas.addEventListener("mousedown",()=>{this.isMouseDown=!0}),this.canvas.addEventListener("mouseup",()=>{this.isMouseDown=!1}),this.backgroundColor=null,this.backgroundImage=null,this.backgroundRepeat=null,this.backgroundSize=null,this.preloadExecuted=!1,this.preload=async()=>{await this.customPreload(),this.preloadExecuted=!0},this.customPreload=async()=>{},this.preloadedImages={},this.preloadedFonts={},this.customPreloadFunction=null,this.setupExecuted=!1,this.customSetup=()=>{},this.loadedAssetsCount=0,this.textureLoadingTime=0,this.setup=()=>{this.customSetup(),this.setupExecuted=!0},this.renderEntities=ft.bind(this),this.start=ut.bind(this),this.configure=pt.bind(this),this.loadImage=gt.bind(this),this.loadFont=xt.bind(this),this.loadGoogleFont=vt.bind(this),this.canvasLoadingView=mt.bind(this),this.updateAssetLoadingCount=yt.bind(this),this.watchedVariables=[],this.debugWatchedEntities=[],this.debugWatchedEntitiesBackup=[],this.loggingDevMode=!1,this.localdata=bt,this.EventBus=Ee,this.isStopped=!1,this.camx=0,this.camy=0}print(t,e="log"){e=="error"?console.error(t):e=="warn"?console.warn(t):console.log(t)}setPreload(t){this.customPreload=t}arraysEqual(t,e){return t.length===e.length&&t.every((s,o)=>s===e[o])}watch(t,e){if(!Array.isArray(e)){new I("Dependency Array Error: Invalid Dependencies",`The dependencies which you provided: <br> <br> '${e}' <br> <br> is not an array of callback functions. Please follow the format: <br> <br> '[() => watchedVar]'`,this.canvasId,"watch()");let s=new I("Error: Dependencies must be an array of functions. For example: [() => watchedVar]");throw s.name="",s}this.watchedVariables.push({dependencies:e,callback:t,lastValues:e.map(s=>typeof s=="function"?s():s)})}checkWatchedVariables(){for(let t of this.watchedVariables){let{dependencies:e,callback:s}=t;if(!Array.isArray(e)){new I("Dependecy Array Error: Invalid Dependencies",`The dependencies which you provided: <br> <br> '${e}' <br> <br> is not an array of callback functions. Please follow the format: <br> <br> '[() => watchedVar]'`,this.canvasId,"watch()");let a=new I("Error: Dependencies must be an array of functions. For example: [() => watchedVar]");throw a.name="",a}let o=e.map(a=>typeof a=="function"?a():a);if(!Array.isArray(e)||e.some(a=>typeof a!="function")){new I("Dependecy Array Error: Invalid Dependencies",`The dependencies which you provided: <br> <br> '${JSON.stringify(e)}' <br> <br> is not an array of callback functions. Please follow the format: <br> <br> '[() => watchedVar]'`,this.canvasId,"watch()");let a=new I("Error: Dependencies must be an array of functions. For example: [() => watchedVar]");throw a.name="",a}this.arraysEqual(o,t.lastValues)||(s(),t.lastValues=o)}}enableDevMode(t=!1){if(console.warn("Dev mode is enabled. This may cause certain security features to be disabled, and may result in unexpected errors. In order to properly utilize devMode, make sure you call it at the TOP of your file (or right after you define `rge`)."),t)try{this.loggingDevMode=!0}catch(e){console.error(e)}this.textureLoadingTime=0}resizeCanvas(){this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight}debugEntity(t,e=10){let s=new D(t.x,t.y,t.id?t.id:"unnamed_entity",13,"green");this.addEntity(s),t.isCurrentlyBeingDebugged=!0,s.zIndex=100;let o=new J(t.x,t.y,3,"black");this.addEntity(o);try{t.debugMode()}catch{console.warn("Entity does not implement a debug border. If this is a Text entity, Group Entity, or a custom entity, ignore.")}o.zIndex=100,this.debugWatchedEntities.push({text:s,entity:t,centerMarker:o,offsetY:e})}disableAllEntityDebugs(){this.debugWatchedEntitiesBackup=this.debugWatchedEntities,this.debugWatchedEntities=[]}reEnableAllEntityDebugs(){this.debugWatchedEntities=this.debugWatchedEntitiesBackup}handleResize=()=>{this.resizeCanvas()};stop(){this.isStopped=!0,this.entities=[],this.keyPressActions={},this.pressedKeys={},this.mouseClickHandlers=[],this.tickFunction=()=>{},cancelAnimationFrame(this.animationFrameId)}addEntity(t){if(this.entities.length+1>this.maxEntities){new I("Entity Overflow Error",`The current engine is currently holding <br><br> ${this.entities.length} <br><br> entities, which is the set limit. In order to increase the limit, please add <br><br>
            maxEntities: (desiredMax) <br><br> to the constructor of the engine OR, add <br><br>
            (engine).maxEntities = (desiredMax) <br><br> to your code. If you would like to remove this limit, please set maxEntities to Infinity.`,this.canvasId,"addEntity()");let e=new I("Entity Overflow Error: Entities array has reached its limit. Modify the engine maxEntities value.");throw e.name="",e}this.entities.push(t)}setTickFunction(t){this.tickFunction=t}setupFunction(t){this.customSetup=t}gameLoop(t){if(this.isStopped){this.clearCanvas();return}else if(this.preloadExecuted&&this.setupExecuted){if(this.lastTimestamp||(this.lastTimestamp=t),this.isEmbedded){let s=JSON.stringify(this.entities);this.canvas.setAttribute("data-entities",s)}let e=t-this.lastTimestamp;if(this.lastTimestamp=t,this.deltaAccumulator+=e,this.isStopped)return;for(;this.deltaAccumulator>=this.targetFrameTime;){this.tickFunction(),this.clearCanvas(),this.renderEntities(),this.checkWatchedVariables();for(let s in this.debugWatchedEntities){let o=this.debugWatchedEntities[s];if(o.isDestroyed==!0){this.debugWatchedEntities.pop(s);break}try{o.text.update(o.entity.x-o.text.getWidth(this.context)/2,o.entity.y-o.offsetY,(o.entity.id?o.entity.id:"unnamed_entity")+` x: ${Math.round(o.entity.x)}, y: ${Math.round(o.entity.y)}; ${o.entity instanceof Y?`children: ${o.entity.entities.length}`:""}`,13,"monospace"),o.centerMarker.update(o.entity.x,o.entity.y)}catch(a){console.error(a)}}this.deltaAccumulator-=this.targetFrameTime}this.animationFrameId=requestAnimationFrame(s=>this.gameLoop(s))}}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}destroyEntity(t){let e=this.entities.indexOf(t);e!==-1&&(this.entities.splice(e,1),t.destroy())}setCenterOrigin(){this.renderingOrigin="center"}resetOrigin(){this.renderingOrigin="topleft"}customZSort(){}setBackground(t={}){let{color:e=null,image:s=null,repeat:o=null}=t;if(this.backgroundColor=e,this.backgroundImage=s,this.backgroundRepeat=o,e)this.canvas.style.backgroundColor=e;else if(s){let a=`url(${s})`;o&&(a+=` ${o}`),a+=" / 100% 100%",this.canvas.style.background=a}else this.canvas.style.backgroundColor=null,this.canvas.style.background=null}};var U=class{constructor(t,e=120){this.engine=new L(t,e,{__fcm__:!0})}configure(t={}){let{preload:e=()=>{},setup:s=()=>{},tick:o=()=>{},centeredOrigin:a=!1,maxEntities:c=500,webGLMode:f=!1}=t;f&&(this.engine.webGLMode=!0,this.engine.context=this.engine.canvas.getContext("webgl")),this.engine.maxEntities=c,this.engine.configure({preload:e,setup:s,tick:o,centeredOrigin:a})}start(){this.engine.start()}stop(){console.log(this.engine),this.engine.tickFunction=()=>{console.warn("WSP FAM")},console.log(this.engine)}};var j=class{constructor(t,e){this.x=t,this.y=e}update(t,e){this.x=t,this.y=e}};var N=class{constructor(t){if(!(t instanceof L))throw new Error("Expected engineRef to be instanceof Engine.");this.engineRef=t,this.cameras={},this.currentCamera=null}addCamera(t,e){if(!(e instanceof j))throw new Error("addCamera expects type Camera");if(this.cameras[t])throw new Error("Camera with that name already exists");this.cameras[t]=e}setCamera(t){if(!this.cameras[t])throw new Error("Camera with that name does not exist");this.currentCamera=this.cameras[t],this.activateCamera()}updateCamera(t,e=0,s=0){if(!this.cameras[t])throw new Error("Camera with that name does not exist");return this.cameras[t].update(e,s),this.currentCamera=this.cameras[t],this.activateCamera(),this.cameras[t]}activateCamera(){try{this.engineRef.camx=this.currentCamera.x,this.engineRef.camy=this.currentCamera.y}catch(t){console.error(t)}}shakeEffect(t,e,s){for(let o=0;o<e*100;o++)setTimeout(()=>{let a=Math.random()*s-s/2,c=Math.random()*s-s/2;this.updateCamera(t,a,c)},o*10)}};var we=class{constructor(){this.scenes={},this.currentScene=null,this.currentEngine=null,this.cameraManager=null}addScene(t,e,s){if(!(e instanceof U))throw new Error("Add scene expects type Scene");if(this.scenes[t])throw new Error("Scene with that name already exists");this.scenes[t]=[e,s],this.scenes[t][0].configure(this.scenes[t][1]),this.currentEngine=this.scenes[t][0].engine}setScene(t){if(!this.scenes[t])throw new Error("Scene with that name does not exist");this.currentScene=this.scenes[t],this.currentEngine=this.currentScene[0].engine,this.cameraManager&&(this.cameraManager.engineRef=this.currentEngine,this.cameraManager.activateCamera()),this.startScene()}startScene(){this.currentScene&&(this.currentScene[0].configure(this.currentScene[1]),this.currentScene[0].start())}addCameraManager(t){if(!(t instanceof N))throw new Error("Expected instanceof CameraManager.");this.cameraManager=t}};var Ce=class{constructor(){this.states={}}addState(t,e){this.states[t]=e}getState(t){return this.states[t]?this.states[t]:null}removeState(t){this.states[t]=null}watchState(t,e,s){if(!(e instanceof L))throw new Error("Expected engineRef to be instance of Engine.");e.watch(s,[()=>this.states[t]])}};var $e=class{constructor(t=null){if(this.engineRef=t,!t instanceof L)throw new Error("Expected engine ref to be of type Engine.");this.entity=null,this.hitbox=null}setEntity(t){this.entity=t}setHitbox(t){this.hitbox=t,this.entity&&this.engineRef.watch(()=>{this.hitbox.x=this.entity.x,this.hitbox.y=this.entity.y},[()=>this.entity.x,()=>this.entity.y])}render(){this.entity&&this.engineRef.addEntity(this.entity),this.hitbox&&this.engineRef.addEntity(this.hitbox)}destroy(){this.entity&&this.engineRef.destroyEntity(this.entity),this.hitbox&&this.engineRef.destroyEntity(this.hitbox)}};var ke=class{constructor(t){this.entity=t,this.currentTexture=0,this.textures=[]}addTexture(t){this.textures.push(t)}applyTexture(t){this.currentTexture=t,this.entity.setTexture(this.textures[t])}removeTexture(){this.entity.setTexture(null)}nextTexture(){this.currentTexture<this.textures.length-1?this.currentTexture+=1:this.currentTexture=0,this.applyTexture(this.currentTexture)}prevTexture(){this.currentTexture>0?this.currentTexture-=1:this.currentTexture=0,this.applyTexture(this.currentTexture)}};var oi={};ie(oi,{compile:()=>wt,evalBytecode:()=>ni,generateAST:()=>ri});function ns(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function X(r,t,e,s){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,X.prototype),o.expected=t,o.found=e,o.location=s,o.name="SyntaxError",o}ns(X,Error);function Et(r,t,e){return e=e||" ",r.length>t?r:(t-=r.length,e+=e.repeat(t),r+e.slice(0,t))}X.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){e=r[s].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,a=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,c=this.location.source+":"+a.line+":"+a.column;if(e){var f=this.location.end,y=Et("",a.line.toString().length," "),g=e[o.line-1],x=o.line===f.line?f.column:g.length+1,$=x-o.column||1;t+=`
 --> `+c+`
`+y+` |
`+a.line+" | "+g+`
`+y+" | "+Et("",o.column-1," ")+Et("",$,"^")}else t+=`
 at `+c}return t};X.buildMessage=function(r,t){var e={literal:function(g){return'"'+o(g.text)+'"'},class:function(g){var x=g.parts.map(function($){return Array.isArray($)?a($[0])+"-"+a($[1]):a($)});return"["+(g.inverted?"^":"")+x.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function s(g){return g.charCodeAt(0).toString(16).toUpperCase()}function o(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+s(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+s(x)})}function a(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(x){return"\\x0"+s(x)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(x){return"\\x"+s(x)})}function c(g){return e[g.type](g)}function f(g){var x=g.map(c),$,R;if(x.sort(),x.length>0){for($=1,R=1;$<x.length;$++)x[$-1]!==x[$]&&(x[R]=x[$],R++);x.length=R}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function y(g){return g?'"'+o(g)+'"':"end of input"}return"Expected "+f(r)+" but "+y(t)+" found."};function ri(r,t){t=t!==void 0?t:{};var e={},s=t.grammarSource,o={start:Kt},a=Kt,c=";",f="var",y="=",g="js!",x="if",$="then",R="end",S="print",F="(",O=")",V="function",_=",",se="True",re="False",ne="==",oe='"',H='\\\\"',Pe=/^[A-Z_$a-z]/,ae=/^[A-Z_a-z0-9]/,Rt=/^[^"]/,St=/^[+\-]/,Pt=/^[*\/]/,It=/^[0-9]/,Tt=/^[ \t\n\r]/,W=T(";",!1),Lt=T("var",!1),Mt=T("=",!1),di=T("js!",!1),At=T("if",!1),Ft=T("then",!1),Ie=T("end",!1),Bt=T("print",!1),le=T("(",!1),he=T(")",!1),Dt=T("function",!1),ce=T(",",!1),fi=T("True",!1),ui=T("False",!1),pi=z([["A","Z"],"_","$",["a","z"]],!1,!1),Wt=z([["A","Z"],"_",["a","z"],["0","9"]],!1,!1),gi=T("==",!1),Ot=T('"',!1),Vt=z(['"'],!0,!1),Yt=T('\\\\"',!1),zt=z(["+","-"],!1,!1),Xt=z(["*","/"],!1,!1),mi=Le("integer"),_t=z([["0","9"]],!1,!1),yi=Le("whitespace"),Ht=z([" ","	",`
`,"\r"],!1,!1),xi=function(i){return{type:"Program",body:i}},vi=function(i,l){return[i].concat(l.map(function(d){return d[2]}))},bi=function(i){return{type:"ExpressionStatement",expression:i}},Ei=function(i,l){return{type:"AssignmentStatement",Identifier:i,Value:l}},wi=function(i,l){return{type:"ReassignmentStatement",Identifier:i,Value:l}},Ci=function(i){return{type:"JavaScriptStatement",code:i}},$i=function(i,l){return{type:"IfStatement",test:i,consequent:{type:"BlockStatement",body:l},alternate:null}},ki=function(i){return{type:"PrintStatement",value:i}},Ri=function(i,l,d){return{type:"FunctionDeclaration",name:i,parameters:l,body:d}},Si=function(i,l){return{type:"FunctionCall",name:i,arguments:l}},Pi=function(i,l){return[i].concat(l.map(function(d){return d[2]}))},Ii=function(i,l){return[i].concat(l.map(function(d){return d[2]}))},Ti=function(i){return i},Li=function(i){return{type:"Literal",value:i}},Mi=function(){return!0},Ai=function(){return!1},Fi=function(i){return{type:"Identifier",name:i}},Bi=function(i){return{type:"Identifier",name:i}},Di=function(){return Te()},Wi=function(i,l){return{type:"BinaryExpression",operator:"==",left:i,right:l}},Oi=function(){return JSON.parse(Te())},Vi=function(i,l){return l.reduce(function(d,h){return{type:"BinaryExpression",operator:h[1],left:d,right:h[3]}},i)},Yi=function(i,l){return l.reduce(function(d,h){return{type:"BinaryExpression",operator:h[1],left:d,right:h[3]}},i)},zi=function(i){return i},Xi=function(){return parseInt(Te(),10)},_i=function(){return[]},n=t.peg$currPos|0,k=n,G=[{line:1,column:1}],A=n,de=t.peg$maxFailExpected||[],p=t.peg$silentFails|0,Q;if(t.startRule){if(!(t.startRule in o))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');a=o[t.startRule]}function Te(){return r.substring(k,n)}function cs(){return k}function ds(){return{source:s,start:k,end:n}}function fs(){return ee(k,n)}function us(i,l){throw l=l!==void 0?l:ee(k,n),Jt([Le(i)],r.substring(k,n),l)}function ps(i,l){throw l=l!==void 0?l:ee(k,n),Gi(i,l)}function T(i,l){return{type:"literal",text:i,ignoreCase:l}}function z(i,l,d){return{type:"class",parts:i,inverted:l,ignoreCase:d}}function gs(){return{type:"any"}}function Hi(){return{type:"end"}}function Le(i){return{type:"other",description:i}}function Gt(i){var l=G[i],d;if(l)return l;if(i>=G.length)d=G.length-1;else for(d=i;!G[--d];);for(l=G[d],l={line:l.line,column:l.column};d<i;)r.charCodeAt(d)===10?(l.line++,l.column=1):l.column++,d++;return G[i]=l,l}function ee(i,l,d){var h=Gt(i),m=Gt(l),u={source:s,start:{offset:i,line:h.line,column:h.column},end:{offset:l,line:m.line,column:m.column}};return d&&s&&typeof s.offset=="function"&&(u.start=s.offset(u.start),u.end=s.offset(u.end)),u}function v(i){n<A||(n>A&&(A=n,de=[]),de.push(i))}function Gi(i,l){return new X(i,null,null,l)}function Jt(i,l,d){return new X(X.buildMessage(i,l),i,l,d)}function Kt(){var i,l,d,h;return i=n,l=E(),d=Me(),d===e&&(d=E()),d!==e?(h=E(),k=i,i=xi(d)):(n=i,i=e),i}function Me(){var i,l,d,h,m,u,b,w,C;if(i=n,l=E(),d=De(),d===e&&(d=Be(),d===e&&(d=Fe(),d===e&&(d=We(),d===e&&(d=Oe(),d===e&&(d=Ae(),d===e&&(d=Ve(),d===e&&(d=Ye()))))))),d!==e){for(h=E(),m=[],u=n,b=n,p++,r.charCodeAt(n)===59?(w=c,n++):(w=e,p===0&&v(W)),p--,w===e?b=void 0:(n=b,b=e),b!==e?(w=E(),C=De(),C===e&&(C=Be(),C===e&&(C=Fe(),C===e&&(C=We(),C===e&&(C=Oe(),C===e&&(C=Ae(),C===e&&(C=Ve(),C===e&&(C=Ye()))))))),C!==e?(b=[b,w,C],u=b):(n=u,u=e)):(n=u,u=e);u!==e;)m.push(u),u=n,b=n,p++,r.charCodeAt(n)===59?(w=c,n++):(w=e,p===0&&v(W)),p--,w===e?b=void 0:(n=b,b=e),b!==e?(w=E(),C=De(),C===e&&(C=Be(),C===e&&(C=Fe(),C===e&&(C=We(),C===e&&(C=Oe(),C===e&&(C=Ae(),C===e&&(C=Ve(),C===e&&(C=Ye()))))))),C!==e?(b=[b,w,C],u=b):(n=u,u=e)):(n=u,u=e);k=i,i=vi(d,m)}else n=i,i=e;return i}function Ae(){var i,l,d,h;return i=n,l=B(),l!==e?(d=E(),r.charCodeAt(n)===59?(h=c,n++):(h=e,p===0&&v(W)),h!==e?(k=i,i=bi(l)):(n=i,i=e)):(n=i,i=e),i}function Fe(){var i,l,d,h,m,u,b,w,C,M;return i=n,r.substr(n,3)===f?(l=f,n+=3):(l=e,p===0&&v(Lt)),l!==e?(d=E(),h=fe(),h!==e?(m=E(),r.charCodeAt(n)===61?(u=y,n++):(u=e,p===0&&v(Mt)),u!==e?(b=E(),w=B(),w!==e?(C=E(),r.charCodeAt(n)===59?(M=c,n++):(M=e,p===0&&v(W)),M!==e?(k=i,i=Ei(h,w)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function Be(){var i,l,d,h,m,u,b,w;return i=n,l=fe(),l!==e?(d=E(),r.charCodeAt(n)===61?(h=y,n++):(h=e,p===0&&v(Mt)),h!==e?(m=E(),u=B(),u!==e?(b=E(),r.charCodeAt(n)===59?(w=c,n++):(w=e,p===0&&v(W)),w!==e?(k=i,i=wi(l,u)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function De(){var i,l,d,h,m,u;return i=n,r.substr(n,3)===g?(l=g,n+=3):(l=e,p===0&&v(di)),l!==e?(d=E(),h=jt(),h!==e?(m=E(),r.charCodeAt(n)===59?(u=c,n++):(u=e,p===0&&v(W)),u!==e?(k=i,i=Ci(h)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function We(){var i,l,d,h,m,u,b,w,C;return i=n,r.substr(n,2)===x?(l=x,n+=2):(l=e,p===0&&v(At)),l!==e?(d=E(),h=Zi(),h===e&&(h=B()),h!==e?(m=E(),r.substr(n,4)===$?(u=$,n+=4):(u=e,p===0&&v(Ft)),u!==e?(b=Me(),b===e&&(b=E()),b!==e?(w=E(),r.substr(n,3)===R?(C=R,n+=3):(C=e,p===0&&v(Ie)),C!==e?(k=i,i=$i(h,b)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function Oe(){var i,l,d,h,m,u,b,w,C,M;return i=n,r.substr(n,5)===S?(l=S,n+=5):(l=e,p===0&&v(Bt)),l!==e?(d=E(),r.charCodeAt(n)===40?(h=F,n++):(h=e,p===0&&v(le)),h!==e?(m=E(),u=B(),u===e&&(u=""),u!==e?(b=E(),r.charCodeAt(n)===41?(w=O,n++):(w=e,p===0&&v(he)),w!==e?(C=E(),r.charCodeAt(n)===59?(M=c,n++):(M=e,p===0&&v(W)),M!==e?(k=i,i=ki(u)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function Ve(){var i,l,d,h,m,u,b,w,C,M,ji,_e,Ni,He,Qi,Ge;return i=n,r.substr(n,8)===V?(l=V,n+=8):(l=e,p===0&&v(Dt)),l!==e?(d=E(),h=te(),h!==e?(m=E(),r.charCodeAt(n)===40?(u=F,n++):(u=e,p===0&&v(le)),u!==e?(b=E(),w=Ji(),w!==e?(C=E(),r.charCodeAt(n)===41?(M=O,n++):(M=e,p===0&&v(he)),M!==e?(ji=E(),_e=Me(),_e!==e?(Ni=E(),r.substr(n,3)===R?(He=R,n+=3):(He=e,p===0&&v(Ie)),He!==e?(Qi=E(),r.charCodeAt(n)===59?(Ge=c,n++):(Ge=e,p===0&&v(W)),Ge!==e?(k=i,i=Ri(h,w,_e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function Ye(){var i,l,d,h,m,u,b,w,C,M;return i=n,l=te(),l!==e?(d=E(),r.charCodeAt(n)===40?(h=F,n++):(h=e,p===0&&v(le)),h!==e?(m=E(),u=Ki(),u!==e?(b=E(),r.charCodeAt(n)===41?(w=O,n++):(w=e,p===0&&v(he)),w!==e?(C=E(),r.charCodeAt(n)===59?(M=c,n++):(M=e,p===0&&v(W)),M!==e?(k=i,i=Si(l,u)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function Ji(){var i,l,d,h,m,u,b;if(i=n,l=te(),l===e&&(l=""),l!==e){for(d=[],h=n,m=n,p++,r.charCodeAt(n)===44?(u=_,n++):(u=e,p===0&&v(ce)),p--,u===e?m=void 0:(n=m,m=e),m!==e?(u=E(),b=te(),b!==e?(m=[m,u,b],h=m):(n=h,h=e)):(n=h,h=e);h!==e;)d.push(h),h=n,m=n,p++,r.charCodeAt(n)===44?(u=_,n++):(u=e,p===0&&v(ce)),p--,u===e?m=void 0:(n=m,m=e),m!==e?(u=E(),b=te(),b!==e?(m=[m,u,b],h=m):(n=h,h=e)):(n=h,h=e);k=i,i=Pi(l,d)}else n=i,i=e;return i}function Ki(){var i,l,d,h,m,u,b;if(i=n,l=B(),l===e&&(l=""),l!==e){for(d=[],h=n,m=n,p++,r.charCodeAt(n)===44?(u=_,n++):(u=e,p===0&&v(ce)),p--,u===e?m=void 0:(n=m,m=e),m!==e?(u=E(),b=B(),b!==e?(m=[m,u,b],h=m):(n=h,h=e)):(n=h,h=e);h!==e;)d.push(h),h=n,m=n,p++,r.charCodeAt(n)===44?(u=_,n++):(u=e,p===0&&v(ce)),p--,u===e?m=void 0:(n=m,m=e),m!==e?(u=E(),b=B(),b!==e?(m=[m,u,b],h=m):(n=h,h=e)):(n=h,h=e);k=i,i=Ii(l,d)}else n=i,i=e;return i}function B(){var i,l;return i=n,l=qi(),l===e&&(l=qt(),l===e&&(l=Zt(),l===e&&(l=Nt()))),l!==e&&(k=i,l=Ti(l)),i=l,i}function qt(){var i,l;return i=n,l=jt(),l===e&&(l=Ui(),l===e&&(l=Zt())),l!==e&&(k=i,l=Li(l)),i=l,i}function Zt(){var i,l;return i=n,r.substr(n,4)===se?(l=se,n+=4):(l=e,p===0&&v(fi)),l!==e&&(k=i,l=Mi()),i=l,i===e&&(i=n,r.substr(n,5)===re?(l=re,n+=5):(l=e,p===0&&v(ui)),l!==e&&(k=i,l=Ai()),i=l),i}function qi(){var i,l,d;return i=n,l=n,p++,d=Ut(),p--,d===e?l=void 0:(n=l,l=e),l!==e?(d=fe(),d!==e?(k=i,i=Fi(d)):(n=i,i=e)):(n=i,i=e),i}function te(){var i,l,d;return i=n,l=n,p++,d=Ut(),p--,d===e?l=void 0:(n=l,l=e),l!==e?(d=fe(),d!==e?(k=i,i=Bi(d)):(n=i,i=e)):(n=i,i=e),i}function Ut(){var i;return r.substr(n,3)===f?(i=f,n+=3):(i=e,p===0&&v(Lt)),i===e&&(r.substr(n,2)===x?(i=x,n+=2):(i=e,p===0&&v(At)),i===e&&(r.substr(n,4)===$?(i=$,n+=4):(i=e,p===0&&v(Ft)),i===e&&(r.substr(n,3)===R?(i=R,n+=3):(i=e,p===0&&v(Ie)),i===e&&(r.substr(n,5)===S?(i=S,n+=5):(i=e,p===0&&v(Bt)),i===e&&(r.substr(n,8)===V?(i=V,n+=8):(i=e,p===0&&v(Dt))))))),i}function fe(){var i,l,d,h;if(i=n,l=r.charAt(n),Pe.test(l)?n++:(l=e,p===0&&v(pi)),l!==e){for(d=[],h=r.charAt(n),ae.test(h)?n++:(h=e,p===0&&v(Wt));h!==e;)d.push(h),h=r.charAt(n),ae.test(h)?n++:(h=e,p===0&&v(Wt));k=i,i=Di()}else n=i,i=e;return i}function Zi(){var i,l,d,h,m,u,b,w;return i=n,l=E(),d=B(),d!==e?(h=E(),r.substr(n,2)===ne?(m=ne,n+=2):(m=e,p===0&&v(gi)),m!==e?(u=E(),b=B(),b!==e?(w=E(),k=i,i=Wi(d,b)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i}function jt(){var i,l,d,h;if(i=n,r.charCodeAt(n)===34?(l=oe,n++):(l=e,p===0&&v(Ot)),l!==e){for(d=[],h=r.charAt(n),Rt.test(h)?n++:(h=e,p===0&&v(Vt)),h===e&&(r.substr(n,3)===H?(h=H,n+=3):(h=e,p===0&&v(Yt)));h!==e;)d.push(h),h=r.charAt(n),Rt.test(h)?n++:(h=e,p===0&&v(Vt)),h===e&&(r.substr(n,3)===H?(h=H,n+=3):(h=e,p===0&&v(Yt)));r.charCodeAt(n)===34?(h=oe,n++):(h=e,p===0&&v(Ot)),h!==e?(k=i,i=Oi()):(n=i,i=e)}else n=i,i=e;return i}function Nt(){var i,l,d,h,m,u,b,w;if(i=n,l=ze(),l!==e){for(d=[],h=n,m=E(),u=r.charAt(n),St.test(u)?n++:(u=e,p===0&&v(zt)),u!==e?(b=E(),w=ze(),w!==e?(m=[m,u,b,w],h=m):(n=h,h=e)):(n=h,h=e);h!==e;)d.push(h),h=n,m=E(),u=r.charAt(n),St.test(u)?n++:(u=e,p===0&&v(zt)),u!==e?(b=E(),w=ze(),w!==e?(m=[m,u,b,w],h=m):(n=h,h=e)):(n=h,h=e);k=i,i=Vi(l,d)}else n=i,i=e;return i}function ze(){var i,l,d,h,m,u,b,w;if(i=n,l=Xe(),l!==e){for(d=[],h=n,m=E(),u=r.charAt(n),Pt.test(u)?n++:(u=e,p===0&&v(Xt)),u!==e?(b=E(),w=Xe(),w!==e?(m=[m,u,b,w],h=m):(n=h,h=e)):(n=h,h=e);h!==e;)d.push(h),h=n,m=E(),u=r.charAt(n),Pt.test(u)?n++:(u=e,p===0&&v(Xt)),u!==e?(b=E(),w=Xe(),w!==e?(m=[m,u,b,w],h=m):(n=h,h=e)):(n=h,h=e);k=i,i=Yi(l,d)}else n=i,i=e;return i}function Xe(){var i,l,d,h,m,u;return i=n,r.charCodeAt(n)===40?(l=F,n++):(l=e,p===0&&v(le)),l!==e?(d=E(),h=Nt(),h!==e?(m=E(),r.charCodeAt(n)===41?(u=O,n++):(u=e,p===0&&v(he)),u!==e?(k=i,i=zi(h)):(n=i,i=e)):(n=i,i=e)):(n=i,i=e),i===e&&(i=qt()),i}function Ui(){var i,l,d,h;if(p++,i=n,l=E(),d=[],h=r.charAt(n),It.test(h)?n++:(h=e,p===0&&v(_t)),h!==e)for(;h!==e;)d.push(h),h=r.charAt(n),It.test(h)?n++:(h=e,p===0&&v(_t));else d=e;return d!==e?(k=i,i=Xi()):(n=i,i=e),p--,i===e&&(l=e,p===0&&v(mi)),i}function E(){var i,l,d;for(p++,i=n,l=[],d=r.charAt(n),Tt.test(d)?n++:(d=e,p===0&&v(Ht));d!==e;)l.push(d),d=r.charAt(n),Tt.test(d)?n++:(d=e,p===0&&v(Ht));return k=i,l=_i(),i=l,p--,l=e,p===0&&v(yi),i}if(Q=a(),t.peg$library)return{peg$result:Q,peg$currPos:n,peg$FAILED:e,peg$maxFailExpected:de,peg$maxFailPos:A};if(Q!==e&&n===r.length)return Q;throw Q!==e&&n<r.length&&v(Hi()),Jt(de,A<r.length?r.charAt(A):null,A<r.length?ee(A,A+1):ee(A,A))}function wt(r){let t="";for(let e=0;e<r.body.length;e++){let s=r.body[e];if(s.type=="PrintStatement")s.value.type=="Identifier"?t+=`console.log(${s.value.name});`:t+=`console.log("${s.value.value}");`;else if(s.type=="AssignmentStatement")s.Value.type=="Identifier"?t+=`var ${s.Identifier} = ${s.Value.value?s.Value.value:s.Value.name};`:t+=`var ${s.Identifier} = ${JSON.stringify(s.Value.value?s.Value.value:s.Value.name)};`;else if(s.type=="ReassignmentStatement")s.Value.type=="Identifier"?t+=`${s.Identifier} = ${s.Value.value?s.Value.value:s.Value.name};`:t+=`${s.Identifier} = ${JSON.stringify(s.Value.value?s.Value.value:s.Value.name)};`;else if(s.type=="FunctionDeclaration"){t+=`function ${s.name.name}() {`;let o=wt({type:"Program",body:s.body});t+=o,t+="}"}else s.type=="JavaScriptStatement"?t+=`${s.code} 
`:s.type=="FunctionCall"&&(t+=`${s.name.name}();`)}return t}function ni(code){eval(code)}function ai(r,t){if(!r||!r.x||!r.y)throw console.log(r),new Error("Invalid object passed into setX");try{r.update(t,r.y)}catch{try{r.x=t}catch(s){console.log("Error",s)}}}function li(r,t){if(!r||!r.x||!r.y)throw console.log(r),new Error("Invalid object passed into setY");try{r.update(r.x,t)}catch{try{r.y=t}catch(s){console.log("Error",s)}}}function hi(r,t){if(!r||!r.fillColor)throw console.log(r),new Error("Invalid object passed into setFillColor");try{r.fillColor=t}catch(e){console.log("Error",e)}}var ci={};ie(ci,{getLogs:()=>as,resetLogger:()=>hs});var Re=console.log,kt=console.error,os=console.onerror,$t=class{constructor(){this.logs=[]}},Se=new $t;function as(){return Se.logs}var ls=!1;function hs(){console.log=Re,console.error=kt,console.onerror=os}var Ct=!1;console.log=function(...r){if(r.some(e=>e&&e.optOut===!0)){Re.apply(console,r);return}Ct?Re.apply(console,r):(Ct=!0,Se.logs.push({type:"log",message:r}),Re.apply(console,r),Ct=!1)};console.error=function(...r){Se.logs.push({type:"thrown_error",message:r}),kt.apply(console,r)};window.onerror=function(r,t,e,s,o){ls||(Se.logs.push({type:"window_error",message:{message:r,source:t,lineno:e,colno:s,error:o}}),kt("Uncaught error:",r,"at",t,"line",e,"column",s,"error object:",o))};export{j as Camera,N as CameraManager,J as Ellipse,L as Engine,P as Entity,$e as EntityManager,Y as Group,dt as PolyBased,q as Polygon,K as Rect,U as Scene,we as SceneManager,pe as Sound,Ce as StateManager,D as Text,ke as TextureManager,ct as Widgets,oi as compiler,ci as logger,hi as setFillColor,ai as setX,li as setY};
